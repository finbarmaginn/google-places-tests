<!DOCTYPE html>
<html>
<head>
  <title>Place Autocomplete</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">

</head>

<style type="text/css">

  input {
    background-color: #fff;
    font-family: Roboto;
    font-size: 15px;
    font-weight: 300;
    margin-left: 12px;
    padding: 0 11px 0 13px;
    text-overflow: ellipsis;
    width: 300px;
  }

</style>

<body>

<h2>Using Autocomplete input</h2>
<input id="pac-input" class="controls" type="text"
       placeholder="Enter a location">


<h2>Using Autocomplete service with regions</h2>
<input id="svc-input" class="controls" type="text"
       placeholder="Enter a location">

<h2>Using Autocomplete service without regions</h2>
<input id="svc-inputNoRegions" class="controls" type="text"
       placeholder="Enter a location">

<script>
  function init() {

    var input = /** @type {!HTMLInputElement} */(
      document.getElementById('pac-input'));

    var autocomplete = new google.maps.places.Autocomplete(input);

    autocomplete.addListener('place_changed', function () {
      infowindow.close();
      marker.setVisible(false);
      var place = autocomplete.getPlace();
      if (!place.geometry) {
        window.alert("Autocomplete's returned place contains no geometry");
        return;
      }

      var address = '';
      if (place.address_components) {
        address = [
          (place.address_components[0] && place.address_components[0].short_name || ''),
          (place.address_components[1] && place.address_components[1].short_name || ''),
          (place.address_components[2] && place.address_components[2].short_name || '')
        ].join(' ');
      }
    });
  }

  //_____________________________________________svc

  var input = /** @type {!HTMLInputElement} */(
    document.getElementById('svc-input'));
  input.addEventListener("keyup", function (e) {
    getAutocompleteServiceResults(input.value, true);
  })
  var inputNoRegions = /** @type {!HTMLInputElement} */(
    document.getElementById('svc-inputNoRegions'));
  input.addEventListener("keyup", function (e) {
    getAutocompleteServiceResults(input.value, false);
  })

  /**
   * Gets results array
   * @param searchTerm
   * @param useRegions
   * @returns {array|null}
   */
  function getAutocompleteServiceResults(searchTerm, useRegions) {
    var types = useRegions ? '(regions)' : '',
      data = null;

    var autocompleteService = new google.maps.places.AutocompleteService();

    autocompleteService.getPlacePredictions({
        input: searchTerm,
        componentRestrictions: {country: 'uk'},
        types: [types]
      }, function (newData) {
        if (newData === null) {
          console.log('No results for suggestions');
        }
        console.log(newData.map(function (item) {
          return item.description;
        }));
        data = newData;
      }
    );
    return data;
  }


</script>
<script src="https://maps.googleapis.com/maps/api/js?signed_in=true&libraries=places&callback=init&types=(regions)"
        async defer></script>
</body>
</html>
